language: python
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.9
    - verilator
python:
- '3.6'
install:
- wget https://raw.githubusercontent.com/phanrahan/magma/master/.travis/install_coreir.sh
- source install_coreir.sh
- pip install python-coveralls
- pip install pytest-cov pytest-pep8
- pip install -r requirements.txt
- pip install -e .
script:
- pytest --cov fault --pep8 fault -v --cov-report term-missing tests
after_success:
- coveralls
deploy:
  provider: pypi
  user: leonardt
  on:
    tags: true
    branch: master
  password:
    secure: jcT2NpA8TcqclHoWcACRxKP6E7qr55FdraWiBI29FheWwKYCdo/ohGhr66TtArjY7yWwA1uj94dmP9zHfVYE4FYYFWJjhz5LAedmfTgkIjDe1+/q2ysG+lvnL6sCfAw2R5/tGH5e3p10fb9UZxRJRS2yo1nekjiIkwZntDj6zHvwzfs45PSspQGERnCNf64w6+7T6dQNPxGfbpzI7CjW1SNw6xg9rMxQxs6WZOKIVWzKYB3duKhLN52bqMjaQCMhUmYKKUug4QnLn/pFL3Pkk88TWDlB5pj9OHyOjmKXHRE/MCy4lQBxfxwRkR0EASVO4TtNvBL0c9gM5p86T0hwUFejOxbFEK4rZfLc8oyI+fFRA9Zitpb2EQcw0QRn0R6r/C1jFOeBuewWEmem/kCS+/Q54qQ4zHViBBK/lJkwQo0+1aCGXZIKNQtKGl1ukFmZTRiZ7WTzjsE1NaZEHYk5h1CnfJudgQKZttX0Scp+H9VpFjW4qDqPNuwzvSHD3Z3eRUtoexyN3hjSlNeCUZd21amtdIRZ7hvyK2T3PBz0lMPVTA+zfJtmxHMQbzU70CAr/NF2rxvc0/74keUbFIp0mpSfBZOgWKp/rAY1a+eQvn2DOSNpJv7mx/MAO7iWJEwoyzaRc7/MnRrmgUVUTLTydLki7MkkNjSNb3FtC+/9m+E=
