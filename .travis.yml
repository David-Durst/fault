language: python
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.9
    - verilator
python:
- '3.6'
install:
- wget https://raw.githubusercontent.com/phanrahan/magma/master/.travis/install_coreir.sh
- source install_coreir.sh
- pip install python-coveralls
- pip install pytest-cov pytest-pep8
- pip install -r requirements.txt
- pip install -e .
script:
- pytest --cov fault --pep8 fault -v --cov-report term-missing tests
after_success:
- coveralls
deploy:
  provider: pypi
  user: leonardt
  on:
    tags: true
    branch: master
  password:
    secure: qkNDAJyRcbzXEJWI/tijq+C7T9fO1w/sNYlBdQh2qjHdxB+ebHxZIGEytCZSU/fB0yqX2x+aMH01Lye4oswMePS+g4WQ/p0SDniFsWe/qR9vnTPZsUdHSIHfD+YVpnPBnKqsx4xSJ+PSqZjxXUjzMlOXEJ3dyuDQ7c8VESlx8tJyxiEFYNBMzbmOhI6Z62pP68UHZm/JxjHz9sZuN7x6wnWTwaRIOrW7jeSf2lAS8NKAhxRSmg9FgF51iHoc+8pUtKAQdekW1tHBTX9U7YRUpFPoN4D+c3tl1RST8Iifld+aBx4aY2mFvR0saqYkFGWAFTidHfdv7Ag9j/jqjYR8mNNeeOTxNQUV1iN0pWpSL0/Eft1QsCS4zmqnrVN/L095nxy+YpOYQoqfWf4MrVfo2dO1sETFrzeCJiwbHO3qkhBV55tjFUNaiJxA8J+/MP5uFQbE/+Kk/xn6gSqqe6ALr3gtqk6/UWuuQicRF3xUYtVRZj4qYwWTy6i2t9Ny2uimoBwSb+YlvXwe4C+BUsDRi5X42VEDKazCAxz41V13EQ8y1qxYWP16LLYT/Wi4OQh2xmEGwN31nk68KBM4HIR7yi5dr6Y1nHPBUSTNVlE1koxjW7UJ2ZWJoI8RfDrUiWQk/1UA2NyY1dX1PK7SdXxYbOvSi7AP8Hw0EjfHlCVd6H4=
